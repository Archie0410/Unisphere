# UniSphere Backend

A comprehensive backend API for university recommendations and career guidance powered by AI.

## ğŸš€ Quick Start

### 1. Setup Environment
```bash
# Run the setup script to generate secure secrets and create .env file
npm run setup

# Or manually copy the example file
cp env.example .env
```

### 2. Install Dependencies
```bash
npm install
```

### 3. Configure Environment Variables
Edit the `.env` file and configure the following **essential** variables:

#### Required Variables:
- `GEMINI_API_KEY` - Get from [Google AI Studio](https://makersuite.google.com/app/apikey)
- `JWT_SECRET` - Auto-generated by setup script
- `JWT_REFRESH_SECRET` - Auto-generated by setup script
- `SESSION_SECRET` - Auto-generated by setup script

#### Optional Variables:
- Database credentials (for full functionality)
- Email settings (for email notifications)
- External API keys (for enhanced features)

### 4. Start the Server
```bash
# Development mode
npm run dev

# Production mode
npm start
```

The server will start on `http://localhost:5000`

## ğŸ“‹ Environment Variables

### Essential (Must Configure)
| Variable | Description | Example |
|----------|-------------|---------|
| `GEMINI_API_KEY` | Google Gemini AI API key | `AIzaSyC...` |
| `JWT_SECRET` | JWT signing secret | Auto-generated |
| `JWT_REFRESH_SECRET` | JWT refresh secret | Auto-generated |
| `SESSION_SECRET` | Session encryption secret | Auto-generated |

### Recommended
| Variable | Description | Default |
|----------|-------------|---------|
| `NODE_ENV` | Environment mode | `development` |
| `PORT` | Server port | `5000` |
| `CORS_ORIGIN` | Allowed origins | `http://localhost:3000` |

### Optional (Advanced Features)
| Variable | Description | Default |
|----------|-------------|---------|
| `DB_HOST` | PostgreSQL host | `localhost` |
| `DB_PORT` | PostgreSQL port | `5432` |
| `DB_NAME` | Database name | `edupath_ai` |
| `EMAIL_HOST` | SMTP host | `smtp.gmail.com` |
| `REDIS_URL` | Redis connection URL | `redis://localhost:6379` |

## ğŸ”§ API Endpoints

### Authentication
- `POST /api/v1/auth/register` - User registration
- `POST /api/v1/auth/login` - User login
- `POST /api/v1/auth/refresh` - Refresh token
- `POST /api/v1/auth/logout` - User logout

### Universities
- `GET /api/v1/university` - Get all universities (with filters)
- `GET /api/v1/university/search?q=query` - Search universities
- `GET /api/v1/university/:id` - Get university by ID
- `POST /api/v1/university/recommend` - Get personalized recommendations
- `GET /api/v1/university/stats/statistics` - Get university statistics

### Career Counseling
- `POST /api/v1/career/chat` - AI career counseling chat
- `POST /api/v1/career/insights` - Get career insights for specific field

### User Management
- `GET /api/v1/user/profile` - Get user profile
- `PUT /api/v1/user/profile` - Update user profile
- `POST /api/v1/user/onboarding` - Complete user onboarding

### Roadmap Generation
- `POST /api/v1/roadmap/generate` - Generate personalized roadmap
- `GET /api/v1/roadmap/:id` - Get roadmap by ID

## ğŸ› ï¸ Development

### Project Structure
```
src/
â”œâ”€â”€ index.js              # Main server file
â”œâ”€â”€ middleware/           # Express middleware
â”‚   â”œâ”€â”€ auth.js          # Authentication middleware
â”‚   â”œâ”€â”€ errorHandler.js  # Error handling
â”‚   â””â”€â”€ notFound.js      # 404 handler
â”œâ”€â”€ models/              # Database models
â”‚   â”œâ”€â”€ index.js         # Sequelize configuration
â”‚   â”œâ”€â”€ User.js          # User model
â”‚   â”œâ”€â”€ StudentProfile.js # Student profile model
â”‚   â””â”€â”€ University.js    # University model
â”œâ”€â”€ routes/              # API routes
â”‚   â”œâ”€â”€ auth.js          # Authentication routes
â”‚   â”œâ”€â”€ user.js          # User management routes
â”‚   â”œâ”€â”€ university.js    # University routes
â”‚   â”œâ”€â”€ career.js        # Career counseling routes
â”‚   â””â”€â”€ roadmap.js       # Roadmap generation routes
â”œâ”€â”€ services/            # Business logic
â”‚   â”œâ”€â”€ geminiService.js # AI service integration
â”‚   â”œâ”€â”€ emailService.js  # Email service
â”‚   â””â”€â”€ universityService.js # University data service
â””â”€â”€ utils/               # Utility functions
    â””â”€â”€ logger.js        # Logging utility
```

### Available Scripts
- `npm run dev` - Start development server with hot reload
- `npm start` - Start production server
- `npm run setup` - Setup environment configuration
- `npm test` - Run tests
- `npm run lint` - Run ESLint
- `npm run lint:fix` - Fix ESLint issues

## ğŸ”’ Security Features

- **JWT Authentication** - Secure token-based authentication
- **Rate Limiting** - Prevent API abuse
- **CORS Protection** - Cross-origin request protection
- **Helmet.js** - Security headers
- **Input Validation** - Request data validation
- **Error Handling** - Comprehensive error management

## ğŸš€ Deployment

### Docker
```bash
# Build the image
docker build -t edupath-ai-backend .

# Run the container
docker run -p 5000:5000 --env-file .env edupath-ai-backend
```

### Environment Setup
1. Copy `env.example` to `.env`
2. Configure all required environment variables
3. Set `NODE_ENV=production`
4. Configure database connection
5. Set up SSL certificates (recommended)

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## ğŸ“„ License

This project is licensed under the MIT License.

## ğŸ†˜ Support

For support and questions:
- Create an issue in the repository
- Check the API documentation
- Review the environment configuration guide
